export type Lang = 'en' | 'tr';

const en = {
  header: {
    sent: 'Sent',
    accepted: 'Accepted',
    off: 'Off',
    autonomous: 'Autonomous',
    testMode: 'Test',
    refresh: 'Refresh',
    reset: 'Reset all',
  },
  index: {
    sendQueued: 'Send queued',
    sendQueuedDesc: 'If the bot is running, WhatsApp will open automatically.',
    saveError: 'Could not write to file. Bot may not see the change.',
    loadingData: 'Loading data...',
    autonomousSendDone: 'Autonomous send completed',
    whatsappSendDone: 'WhatsApp send completed',
    business: 'Business',
    resetDoneTitle: 'Reset complete',
    resetDoneDesc: 'Timeline cleared, filters reset, list refreshed.',
    resetConfirmTitle: 'Are you sure?',
    resetConfirmDesc: 'All lead send statuses will be reset. This cannot be undone.',
  },
  table: {
    search: 'Search... (name, city, phone)',
    all: 'All',
    call: 'Call',
    business: 'Business',
    status: 'Status',
    action: 'Action',
    more: 'More',
    edit: 'Edit',
    openWhatsApp: 'Open WhatsApp',
    reset: 'Reset',
    send: 'Send',
    strategyA: 'A - The Visionary (Tech-First)',
    strategyB: 'B - The Neighbor (Community)',
    strategyC: 'C - The Analyst (Data & Retention)',
    strategyD: 'D - The Closer (Churn Recovery)',
    strategyE: 'E - The Optimizer (Operations)',
    noMatchingLeads: 'No matching leads',
    showLess: 'Show less',
    editMessage: 'Edit Message',
    editMessageDesc: 'Select a strategy, create the message, then send.',
    selectStrategy: 'Select Strategy',
    strategyALabel: 'A - The Visionary (Tech-First)',
    strategyADesc: 'Economic Middleware for boutique cafés; 10-pilot program with visionary feedback.',
    strategyBLabel: 'B - The Neighbor (Community & Ecosystem)',
    strategyBDesc: 'Local ecosystem network; pilot group in Istanbul.',
    strategyCLabel: 'C - The Analyst (Data & Retention)',
    strategyCDesc: "We Miss You + Customer Recovery; 1-month free pilot to see impact on revenue.",
    strategyDLabel: 'D - The Closer (Churn Recovery)',
    strategyDDesc: '90% visit prediction; auto-recall no-shows; 10 cafés free pilot before global.',
    strategyELabel: 'E - The Optimizer (Operations)',
    strategyEDesc: 'Stock forecasting, product popularity, and peak hour analysis via AI; 10-pilot for operational efficiency.',
    messagePlaceholder: "Edit your message here or click 'Create Message'...",
    creating: 'Creating...',
    createMessage: 'Create Message',
    close: 'Close',
    messageError: 'Message could not be created. Check OPENAI_API_KEY.',
    messageRegenError: 'Message could not be regenerated. Check OPENAI_API_KEY.',
    delete: 'Delete',
    messageFlow: 'Message flow',
    singleMessage: 'Single message',
    twoStepGreetingFirst: 'Two-step (greeting first)',
    twoStepHint: '1. "Merhabalar kolay gelsin" → 2. Main message (A/B/C/D). First greeting, second click sends main.',
    new: 'New',
    deleteConfirm: 'Remove this lead from the list and from Google Sheets?',
    phoneNotSent: 'Not Sent',
    phoneRequested: 'Requested',
    phoneSent: 'Sent',
    phoneInProcess: 'In Process',
    phoneReady: 'Ready',
    phoneEmpty: '—',
  },
  waStatus: {
    'Not Sent': 'Not Sent',
    'Accepted': 'Accepted',
    'Rejected': 'Rejected',
    'Demo Scheduled': 'Demo Scheduled',
    'Pending': 'Pending',
    'Interested': 'Interested',
    'Email Requested': 'Email Requested',
    'Number Not Found': 'Number Not Found',
  },
  activity: {
    successTimeline: 'Success Timeline',
    reset: 'Reset',
    recentActions: 'Recent actions',
    waitingForData: 'Waiting for data...',
    messageSentPending: 'Message sent, waiting for reply',
    statusAccepted: 'Accepted',
    statusRejected: 'Rejected',
    demoScheduled: 'Demo scheduled',
  },
  chart: {
    leadDistribution: 'Lead Distribution',
    byCity: 'By city',
    waitingForData: 'Waiting for data...',
  },
  panel: {
    noReviewYet: 'No review yet.',
    messageType: 'Message type',
    messageFlow: 'Message flow',
    singleMessage: 'Single message',
    twoStepGreetingFirst: 'Two-step (greeting first)',
    step1Greeting: '1. Greeting',
    step2MainMessage: '2. Main message (A/B/C/D)',
    sendGreeting: 'Send greeting',
    sendMainMessage: 'Send main message',
    greetingSent: 'Sent',
    createMessage: 'Create message',
    whatsappOpening: 'Opening WhatsApp',
    whatsappEnterDesc: 'Bot must be ON (green) and running in terminal. Enter in 4–10 sec. Keep WhatsApp window open.',
  },
};

const tr: typeof en = {
  header: {
    sent: 'Gönderilen',
    accepted: 'Kabul',
    off: 'Kapalı',
    autonomous: 'Otonom',
    testMode: 'Test',
    refresh: 'Yenile',
    reset: 'Her şeyi sıfırla',
  },
  index: {
    sendQueued: 'Gönderim kuyruğa alındı',
    sendQueuedDesc: 'Bot çalışıyorsa WhatsApp otomatik açılacaktır.',
    saveError: 'Dosyaya yazılamadı. Bot değişikliği göremeyebilir.',
    loadingData: 'Veri bekleniyor...',
    resetDoneTitle: 'Sıfırlama tamamlandı',
    resetDoneDesc: 'Zaman çizelgesi temizlendi, filtreler ve liste yenilendi.',
    resetConfirmTitle: 'Emin misin?',
    resetConfirmDesc: 'Tüm lead gönderim durumları sıfırlanacak. Bu işlem geri alınamaz.',
    autonomousSendDone: 'Otonom gönderim tamamlandı',
    whatsappSendDone: 'WhatsApp gönderimi tamamlandı',
    business: 'İşletme',
  },
  table: {
    messageFlow: 'Mesaj akışı',
    singleMessage: 'Tek mesaj',
    twoStepGreetingFirst: 'İki adım (önce selam)',
    twoStepHint: '1. "Merhabalar kolay gelsin" → 2. Ana mesaj (A/B/C/D). Önce selam, ikinci tıklamada ana mesaj gider.',
    new: 'Yeni',
    search: 'Ara... (isim, şehir, numara)',
    all: 'Tümü',
    call: 'Arama',
    business: 'İşletme',
    status: 'Durum',
    action: 'Aksiyon',
    more: 'Diğer',
    edit: 'Düzenle',
    openWhatsApp: 'WhatsApp Aç',
    reset: 'Sıfırla',
    send: 'Gönder',
    strategyA: 'A - The Visionary (Tech-First)',
    strategyB: 'B - The Neighbor (Community)',
    strategyC: 'C - The Analyst (Data & Retention)',
    strategyD: 'D - The Closer (Churn Recovery)',
    strategyE: 'E - The Optimizer (Optimizasyon)',
    noMatchingLeads: 'Eşleşen lead yok',
    showLess: 'Daha az',
    editMessage: 'Mesajı Düzenle',
    editMessageDesc: 'Strateji seçip mesaj oluştur, beğenmezsen tekrar oluştur, sonra gönder.',
    selectStrategy: 'Strateji Seç',
    strategyALabel: 'A - The Visionary (Tech-First)',
    strategyADesc: 'Akıllı Ara Katman; 10 işletmeyle pilot program, vizyoner geri bildirim.',
    strategyBLabel: 'B - The Neighbor (Community & Ecosystem)',
    strategyBDesc: 'Yerel esnaf dayanışma ağı; İstanbul pilot grup.',
    strategyCLabel: 'C - The Analyst (Data & Retention)',
    strategyCDesc: "Seni Özledik + Müşteri Kurtarma; 1 ay ücretsiz pilot, ciro etkisi.",
    strategyDLabel: 'D - The Closer (Churn Recovery)',
    strategyDDesc: '%90 geliş tahmini; gelmeyeni otomatik geri çağırma; global öncesi 10 kafe ücretsiz pilot.',
    strategyELabel: 'E - The Optimizer (Optimizasyon)',
    strategyEDesc: 'AI ile stok tahmini, ürün popülerliği ve yoğun saat analizi; operasyonel verimlilik için 10-pilot programı.',
    messagePlaceholder: "Mesajınızı buradan düzenleyin veya 'Mesaj Oluştur' butonuna basın...",
    creating: 'Oluşturuluyor...',
    createMessage: 'Mesaj Oluştur',
    close: 'Kapat',
    messageError: 'Mesaj oluşturulamadı. OPENAI_API_KEY ayarlı mı kontrol edin.',
    messageRegenError: 'Mesaj yeniden yazılamadı. OPENAI_API_KEY ayarlı mı kontrol edin.',
    delete: 'Sil',
    deleteConfirm: 'Bu lead listeden ve Google Sheets\'ten silinsin mi?',
    phoneNotSent: 'Gönderilmedi',
    phoneRequested: 'İstendi',
    phoneSent: 'Gönderildi',
    phoneInProcess: 'İşlemde',
    phoneReady: 'Hazır',
    phoneEmpty: '—',
  },
  waStatus: {
    'Not Sent': 'Gönderilmedi',
    'Accepted': 'Kabul',
    'Rejected': 'Reddedildi',
    'Demo Scheduled': 'Demo Planlandı',
    'Pending': 'Beklemede',
    'Interested': 'İlgileniyor',
    'Email Requested': 'Mail İstedi',
    'Number Not Found': 'Numara Bulunamadı',
  },
  activity: {
    successTimeline: 'Başarı Zaman Çizelgesi',
    reset: 'Sıfırla',
    recentActions: 'Son işlemler',
    waitingForData: 'Veri bekleniyor...',
    messageSentPending: 'Mesaj gönderildi, yanıt bekleniyor',
    statusAccepted: 'Kabul edildi',
    statusRejected: 'Reddedildi',
    demoScheduled: 'Demo planlandı',
  },
  chart: {
    leadDistribution: 'Lead Dağılımı',
    byCity: 'Şehre göre',
    waitingForData: 'Veri bekleniyor...',
  },
  panel: {
    noReviewYet: 'Henüz yorum yok.',
    messageType: 'Mesaj türü',
    messageFlow: 'Mesaj akışı',
    singleMessage: 'Tek mesaj',
    twoStepGreetingFirst: 'İki adım (önce selam)',
    step1Greeting: '1. Selam',
    step2MainMessage: '2. Ana mesaj (A/B/C/D)',
    sendGreeting: 'Selamı gönder',
    sendMainMessage: 'Ana mesajı gönder',
    greetingSent: 'Gönderildi',
    createMessage: 'Mesaj oluştur',
    whatsappOpening: 'WhatsApp açılıyor',
    whatsappEnterDesc: 'Üstte bot AÇIK (yeşil) ve terminalde bot çalışıyor olmalı. 4–10 sn sonra Enter basacak.',
  },
};

export const translations = { en, tr } as const;

function get(obj: Record<string, unknown>, path: string): string | undefined {
  const dotIndex = path.indexOf('.');
  if (dotIndex === -1) {
    const v = obj[path];
    return typeof v === 'string' ? v : undefined;
  }
  const first = path.slice(0, dotIndex);
  const rest = path.slice(dotIndex + 1);
  const next = obj[first];
  if (next == null || typeof next !== 'object') return undefined;
  return get(next as Record<string, unknown>, rest);
}

export function translate(lang: Lang, key: string): string {
  const obj = translations[lang] as Record<string, unknown>;
  return get(obj, key) ?? get(translations.en as Record<string, unknown>, key) ?? key;
}
